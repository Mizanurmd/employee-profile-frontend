<div
  class="container"
  style="max-height: 80vh; overflow-y: auto; padding: 16px"
>
  <div align="right">
    <div>
      <button
        mat-raised-button
        class="btn btn-danger"
        type="button"
        (click)="onNoClick()"
      >
        &times;
      </button>
    </div>
    <h1 style="text-align: center; color: blue">Employee Form</h1>
  </div>

  <p *ngIf="errorText" class="error-message">{{errorText}}</p>

  <form [formGroup]="employeeForm" (ngSubmit)="submitForm()">
    <div class="card p-5 mt-2">
      <!-- Name & Mobile -->
      <div style="display: flex; gap: 16px">
        <mat-form-field appearance="outline" style="flex: 1">
          <mat-label>Employee Name</mat-label>
          <input matInput placeholder="Employee Name" formControlName="name" />
        </mat-form-field>

        <mat-form-field appearance="outline" style="flex: 1">
          <mat-label>Mobile</mat-label>
          <input
            matInput
            placeholder="Mobile"
            formControlName="mobile"
            type="text"
          />

          <!-- Required -->
          <mat-error
            *ngIf="employeeForm.get('mobile')?.touched && employeeForm.get('mobile')?.hasError('required')"
          >
            Mobile number is required
          </mat-error>

          <!-- Minimum length -->
          <mat-error
            *ngIf="employeeForm.get('mobile')?.touched && employeeForm.get('mobile')?.hasError('minlength')"
          >
            Mobile number must be at least 10 digits
          </mat-error>

          <!-- Maximum length -->
          <mat-error
            *ngIf="employeeForm.get('mobile')?.touched && employeeForm.get('mobile')?.hasError('maxlength')"
          >
            Mobile number cannot exceed 11 digits
          </mat-error>

          <!-- Only numbers -->
          <mat-error
            *ngIf="employeeForm.get('mobile')?.touched && employeeForm.get('mobile')?.hasError('pattern')"
          >
            Mobile number must contain only numbers
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Email & NID -->
      <div style="display: flex; gap: 16px">
        <mat-form-field appearance="outline" style="flex: 1">
          <mat-label>Email</mat-label>
          <input matInput placeholder="Email" formControlName="email" />
        </mat-form-field>

        <mat-form-field appearance="outline" style="flex: 1">
          <mat-label>NID</mat-label>
          <input
            matInput
            placeholder="NID NO"
            formControlName="nid"
            type="text"
          />

          <!-- Required -->
          <mat-error
            *ngIf="employeeForm.get('nid')?.touched && employeeForm.get('nid')?.hasError('required')"
          >
            NID is required
          </mat-error>

          <!-- Minimum length -->
          <mat-error
            *ngIf="employeeForm.get('nid')?.touched && employeeForm.get('nid')?.hasError('minlength')"
          >
            NID must be at least 10 digits
          </mat-error>

          <!-- Maximum length -->
          <mat-error
            *ngIf="employeeForm.get('nid')?.touched && employeeForm.get('nid')?.hasError('maxlength')"
          >
            NID cannot exceed 17 digits
          </mat-error>

          <!-- Only numbers -->
          <mat-error
            *ngIf="employeeForm.get('nid')?.touched && employeeForm.get('nid')?.hasError('pattern')"
          >
            NID must contain only numbers
          </mat-error>
        </mat-form-field>
      </div>

      <!-- Present & Permanent Address -->
      <div style="display: flex; gap: 16px; flex-wrap: wrap">
        <div style="flex: 1">
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Present Address</mat-label>
            <input
              matInput
              placeholder="Present Address"
              formControlName="presentAddress"
            />
          </mat-form-field>
        </div>

        <div style="flex: 1">
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Permanent Address</mat-label>
            <input
              matInput
              placeholder="Permanent Address"
              formControlName="permanentAddress"
            />
          </mat-form-field>
        </div>
      </div>

      <!-- Birth Date & Gender -->
      <div style="display: flex; gap: 16px; flex-wrap: wrap">
        <div style="flex: 1">
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Birth Date*</mat-label>
            <input
              matInput
              [matDatepicker]="picker1"
              formControlName="dateOfBirth"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker1"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
            <mat-error
              *ngIf="employeeForm.get('dateOfBirth')?.hasError('required')"
            >
              Birth Date is required
            </mat-error>
            <mat-error
              *ngIf="employeeForm.get('dateOfBirth')?.hasError('futureDate')"
            >
              Birth Date cannot be today or in the future
            </mat-error>
          </mat-form-field>
        </div>

        <div style="flex: 1; display: flex; align-items: center; gap: 16px">
          <label style="margin: 0"><strong>Gender:</strong></label>
          <mat-radio-group
            formControlName="gender"
            style="display: flex; gap: 8px"
          >
            <mat-radio-button value="Male">Male</mat-radio-button>
            <mat-radio-button value="Female">Female</mat-radio-button>
            <mat-radio-button value="Other">Other</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>

      <!-- Education & Skills -->
      <div
        style="
          display: flex;
          gap: 16px;
          align-items: flex-start;
          flex-wrap: wrap;
        "
      >
        <!-- Education Dropdown -->
        <div
          style="
            flex: 1 1 0;
            min-width: 0;
            display: flex;
            align-items: center;
            gap: 8px;
          "
        >
          <label style="margin: 0"><strong>Education:</strong></label>
          <select
            id="highestEducation"
            class="form-control"
            formControlName="highestEducation"
          >
            <option value="">Select option</option>
            <option *ngFor="let edu of educationOptions" [value]="edu">
              {{ edu }}
            </option>
          </select>
        </div>

        <!-- Skills Checkboxes -->
        <div
          style="
            flex: 1 1 0;
            min-width: 0;
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
          "
        >
          <label style="margin: 0"><strong>Skills:</strong></label>
          <div
            *ngFor="let skill of skillOptions"
            style="display: flex; align-items: center; gap: 4px"
          >
            <input
              type="checkbox"
              [value]="skill"
              (change)="onSkillChange($event)"
              [checked]="employeeForm.value.skills?.includes(skill)"
            />
            <span>{{ skill }}</span>
          </div>
        </div>
      </div>

      <!-- Profile Image -->
      <img *ngIf="imagePreview" [src]="imagePreview" width="100" height="100" />
      <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 15px">
        <div style="flex: 1; display: flex; align-items: center; gap: 8px">
          <label style="margin: 0">Profile Image:</label>
          <input type="file" (change)="onProfileImageChange($event)" />
          <span *ngIf="employeeForm.value.profileImage">
            {{ employeeForm.value.profileImage.name }}
          </span>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="text-center mt-3">
        <button
          mat-raised-button
          color="primary"
          style="margin-left: 10px"
          class="m-2"
          type="submit"
        >
          {{ data ? 'Update' : 'Save' }}
        </button>
      </div>
    </div>
  </form>
</div>
